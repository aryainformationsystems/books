<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content=
    "application/xhtml+xml; charset=iso-8859-1" />
    <title>
      Mutter-43.3
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL-NS Stylesheets Vsnapshot" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="blfs" id="blfs-r11.3-428">
    <div class="navheader">
      <h4>
        Beyond Linux<sup>®</sup> From Scratch <span class="phrase">(System
        V</span> Edition) - Version r11.3-428
      </h4>
      <h3>
        Chapter&nbsp;33.&nbsp;GNOME Libraries and Desktop
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="gnome-control-center.html" title=
          "gnome-control-center-43.4.1">Prev</a>
          <p>
            gnome-control-center-43.4.1
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="gnome-shell.html" title=
          "gnome-shell-43.3">Next</a>
          <p>
            gnome-shell-43.3
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="core.html" title=
          "Chapter&nbsp;33.&nbsp;GNOME Libraries and Desktop">Up</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch    (System V Edition) - Version r11.3-428">
          Home</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="en" xml:lang="en">
      <h1 class="sect1">
        <a id="mutter" name="mutter"></a>Mutter-43.3
      </h1>
      <div class="package" lang="en" xml:lang="en">
        <h2 class="sect2">
          Introduction to Mutter
        </h2>
        <p>
          <span class="application">Mutter</span> is the window manager for
          <span class="application">GNOME</span>. It is not invoked directly,
          but from <span class="application">GNOME Session</span> (on a
          machine with a hardware accelerated video driver).
        </p>
        <div class="admon note">
          <img alt="[Note]" src="../images/note.png" />
          <h3>
            Note
          </h3>
          <p>
            Development versions of BLFS may not build or run some packages
            properly if dependencies have been updated since the most recent
            stable versions of the book.
          </p>
        </div>
        <h3>
          Package Information
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li class="listitem">
              <p>
                Download (HTTP): <a class="ulink" href=
                "https://download.gnome.org/sources/mutter/43/mutter-43.3.tar.xz">
                https://download.gnome.org/sources/mutter/43/mutter-43.3.tar.xz</a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Download (FTP): <a class="ulink" href=
                "ftp://ftp.acc.umu.se/pub/gnome/sources/mutter/43/mutter-43.3.tar.xz">
                ftp://ftp.acc.umu.se/pub/gnome/sources/mutter/43/mutter-43.3.tar.xz</a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Download MD5 sum: aba8f5170a27fe7d24f07a3b2fdf2725
              </p>
            </li>
            <li class="listitem">
              <p>
                Download size: 2.7 MB
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimated disk space required: 151 MB (without tests)
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimated build time: 0.6 SBU (Using parallelism=4)
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Mutter Dependencies
        </h3>
        <h4>
          Required
        </h4>
        <p class="required">
          <a class="xref" href="gnome-settings-daemon.html" title=
          "gnome-settings-daemon-43.0">gnome-settings-daemon-43.0</a>,
          <a class="xref" href="../x/graphene.html" title=
          "Graphene-1.10.8">graphene-1.10.8</a>, <a class="xref" href=
          "../x/libxcvt.html" title="libxcvt-0.1.2">libxcvt-0.1.2</a>,
          <a class="xref" href="../general/libxkbcommon.html" title=
          "libxkbcommon-1.5.0">libxkbcommon-1.5.0</a>, and <a class="xref"
          href="../multimedia/pipewire.html" title=
          "Pipewire-0.3.70">pipewire-0.3.70</a>
        </p>
        <h4>
          Recommended
        </h4>
        <p class="recommended">
          <a class="xref" href="../general/desktop-file-utils.html" title=
          "desktop-file-utils-0.26">desktop-file-utils-0.26</a>, <a class=
          "xref" href="../general/gobject-introspection.html" title=
          "gobject-introspection-1.76.1">gobject-introspection-1.76.1</a>,
          <a class="xref" href="../x/startup-notification.html" title=
          "startup-notification-0.12">startup-notification-0.12</a>, and
          <a class="xref" href="../general/sysprof.html" title=
          "Sysprof-3.48.0">sysprof-3.48.0</a>
        </p>
        <h4>
          Recommended (Required to build the Wayland compositor)
        </h4>
        <p class="recommended">
          <a class="xref" href="../x/x7driver.html#libinput" title=
          "libinput-1.23.0">libinput-1.23.0</a>, <a class="xref" href=
          "../general/wayland.html" title=
          "Wayland-1.22.0">Wayland-1.22.0</a>, <a class="xref" href=
          "../general/wayland-protocols.html" title=
          "Wayland-Protocols-1.31">wayland-protocols-1.31</a>, and <a class=
          "xref" href="../x/xwayland.html" title=
          "Xwayland-23.1.1">Xwayland-23.1.1</a>. Additionally, <a class=
          "xref" href="../x/gtk3.html" title="GTK+-3.24.37">GTK+-3.24.37</a>
          needs to be built with <span class="application">Wayland</span>
          support.
        </p>
        <h4>
          Recommended (Runtime)
        </h4>
        <p class="recommended">
          <a class="xref" href="../general/blocaled.html" title=
          "blocaled-0.4">blocaled-0.4</a>
        </p>
        <h4>
          Optional
        </h4>
        <p class="optional">
          <a class="xref" href=
          "../general/python-modules.html#python-dbusmock" title=
          "dbusmock-0.29.0">dbusmock-0.29.0</a> (required for tests),
          <a class="xref" href="../x/xorg-server.html" title=
          "Xorg-Server-21.1.8">Xorg-Server-21.1.8</a> (for X11 sessions)
        </p>
        <p class="usernotes">
          User Notes: <a class="ulink" href=
          "https://wiki.linuxfromscratch.org/blfs/wiki/mutter">https://wiki.linuxfromscratch.org/blfs/wiki/mutter</a>
        </p>
      </div>
      <div class="installation" lang="en" xml:lang="en">
        <h2 class="sect2">
          Installation of Mutter
        </h2>
        <p>
          Install <span class="application">Mutter</span> by running the
          following commands:
        </p>
        <pre class="userinput"><kbd class="command">mkdir build &amp;&amp;
cd    build &amp;&amp;

meson setup --prefix=/usr              \
            --buildtype=debugoptimized \
            -Dtests=false              \
            ..                         &amp;&amp;
ninja</kbd></pre>
        <p>
          The test suite requires debug functions to be enabled in the build,
          and an external program called <span class=
          "command"><strong>xvfb-run</strong></span>. If you wish to run the
          tests, you should download and install it before running
          <span class="command"><strong>meson</strong></span>. You can obtain
          it from <a class="ulink" href=
          "https://anduin.linuxfromscratch.org/BLFS/mutter/xvfb-run">xvfb-run</a>,
          and install it with executable permissions in <code class=
          "filename">/usr/bin</code>. <span class=
          "command"><strong>xvfb-run</strong></span> needs <span class=
          "command"><strong>Xvfb</strong></span> at runtime, and <span class=
          "command"><strong>Xvfb</strong></span> can be installed from either
          <a class="xref" href="../x/xorg-server.html" title=
          "Xorg-Server-21.1.8">Xorg-Server-21.1.8</a> or <a class="xref"
          href="../x/xwayland.html" title=
          "Xwayland-23.1.1">Xwayland-23.1.1</a>. You should also replace
          <em class="parameter"><code>-Dtests=false</code></em> in the
          <span class="command"><strong>meson</strong></span> command, with
          <em class="parameter"><code>-Dtests=true</code></em>. The test
          suite requires the mutter schema to be installed on the system, so
          it is better to run the tests after installing the package.
        </p>
        <p>
          You can also test basic functions of <span class=
          "application">Mutter</span> following <a class="xref" href=
          "mutter.html#mutter-starting" title="Starting Mutter">the section
          called &ldquo;Starting Mutter&rdquo;</a>, after installing it.
        </p>
        <p>
          Now, as the <code class="systemitem">root</code> user:
        </p>
        <pre class="root"><kbd class="command">ninja install</kbd></pre>
        <p>
          If you wish to run the tests, remove the reference to <span class=
          "application">Zenity</span> which is not a part of BLFS from one
          test:
        </p>
        <pre class="test"><kbd class=
        "command">sed 's/zenity --[a-z]*/gtk3-demo/' -i ../src/tests/x11-test.sh</kbd></pre>
        <p>
          Now run the test suite:
        </p>
        <pre class="test"><kbd class="command">HOME= ninja test</kbd></pre>
        <p>
          The tests require an active X or wayland session. The <code class=
          "filename">native-unit</code> test is known to fail. A lot of tests
          will fail if the opengl rendering is not done in hardware. Don't
          make any mouse or keyboard input while the test suite is running or
          some tests may fail.
        </p>
      </div>
      <div class="commands" lang="en" xml:lang="en">
        <h2 class="sect2">
          Command Explanations
        </h2>
        <p>
          <em class="parameter"><code>--buildtype=debugoptimized</code></em>:
          Override the default buildtype (<span class=
          "quote">&ldquo;<span class="quote">debug</span>&rdquo;</span>),
          which would produce unoptimized binaries. It's used instead of
          <code class="option">--buildtype=release</code> to work around an
          issue causing gnome-shell to crash.
        </p>
        <p>
          <em class="parameter"><code>-Dtests=false</code></em>: Prevents
          building the tests, and removes a hard requirement on <span class=
          "command"><strong>xvfb-run</strong></span>.
        </p>
        <p>
          <code class="option">-Dprofiler=false</code>: Use this option if
          <span class="application">Sysprof</span> is not installed, and you
          don't want meson to download <span class=
          "application">Sysprof</span> source code.
        </p>
      </div>
      <div class="starting" lang="en" xml:lang="en">
        <h2 class="sect2">
          <a id="mutter-starting" name="mutter-starting"></a>Starting Mutter
        </h2>
        <p>
          <span class="application">Mutter</span> is normally used as a
          component of <span class="application">gnome-shell</span>, but it
          can be used as a standalone Wayland compositor too. To run
          <span class="application">Mutter</span> as a Wayland compositor, in
          a virtual console, issue:
        </p>
        <pre class="userinput"><kbd class=
        "command">mutter --wayland -- vte-2.91</kbd></pre>
        <p>
          Replace <span class="command"><strong>vte-2.91</strong></span> with
          the command line for the first application you want in the Wayland
          session. Note that once this application exits, the Wayland session
          will be terminated.
        </p>
        <p>
          <span class="application">Mutter</span> can also function as a
          nested compositor in another Wayland session. In a terminal
          emulator, issue:
        </p>
        <pre class="userinput"><kbd class=
        "command">MUTTER_DEBUG_DUMMY_MODE_SPECS=1920x1080 mutter --wayland --nested -- vte-2.91</kbd></pre>
        <p>
          Replace <em class="replaceable"><code>1920x1080</code></em> with
          the size you want for the nested Wayland session.
        </p>
      </div>
      <div class="content" lang="en" xml:lang="en">
        <h2 class="sect2">
          Contents
        </h2>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">Installed Programs:</strong>
              <span class="segbody">mutter</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Installed Libraries:</strong>
              <span class="segbody">libmutter-11.so</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Installed Directories:</strong>
              <span class=
              "segbody">/usr/{lib,include,libexec/installed-tests,share/{,installed-tests}}/mutter-11</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            Short Descriptions
          </h3>
          <table border="0" class="variablelist">
            <colgroup>
              <col align="left" valign="top" />
              <col />
            </colgroup>
            <tbody>
              <tr>
                <td>
                  <p>
                    <a id="mutter-prog" name="mutter-prog"></a><span class=
                    "term"><span class=
                    "command"><strong>mutter</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is a <span class="application">Clutter</span> based
                    compositing <span class="application">GTK+</span> Window
                    Manager
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="libmutter" name="libmutter"></a><span class=
                    "term"><code class=
                    "filename">libmutter-11.so</code></span>
                  </p>
                </td>
                <td>
                  <p>
                    contains the <span class="application">Mutter</span> API
                    functions
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="gnome-control-center.html" title=
          "gnome-control-center-43.4.1">Prev</a>
          <p>
            gnome-control-center-43.4.1
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="gnome-shell.html" title=
          "gnome-shell-43.3">Next</a>
          <p>
            gnome-shell-43.3
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="core.html" title=
          "Chapter&nbsp;33.&nbsp;GNOME Libraries and Desktop">Up</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch    (System V Edition) - Version r11.3-428">
          Home</a>
        </li>
      </ul>
    </div>
  </body>
</html>
